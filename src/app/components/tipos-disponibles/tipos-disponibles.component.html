<div class="tipos-grid">
  <mat-card
    *ngFor="let tipo of tipos"
    class="tipo-card"
    appearance="outlined"
  >

    <mat-card-header>
      <mat-card-title>{{ tipo.definicion }}</mat-card-title>
      <mat-card-subtitle>{{ tipo.descripcion }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="imagen-wrapper">
      <img
        [src]="url_base_api + tipo.imagen_portada"
        alt="{{ tipo.definicion }}"
      />
    </mat-card-content>

    <mat-card-content>

      <ng-container *ngIf="getCotizacion(tipo.id) as cotizacion; else cargando">
        <p class="precio-total">
          Total: <strong>${{ cotizacion.total | number }}</strong>
        </p>

        <p class="detalle">
          {{ cotizacion.detalle.length }}
          noche{{ cotizacion.detalle.length > 1 ? 's' : '' }}
          · {{ pax }} personas
        </p>
      </ng-container>

      <ng-template #cargando>
        <p class="descripcion">
          Calculando cotización…
        </p>
      </ng-template>

      <span class="badge">
        {{ tipo.suma }} disponible{{ tipo.suma > 1 ? 's' : '' }}
      </span>

    </mat-card-content>

    <mat-card-actions>
      <button
        mat-raised-button
        color="primary"
        class="w-100"
        (click)="seleccionar.emit(tipo.id)"
      >
        Reservar
      </button>
    </mat-card-actions>

  </mat-card>
</div>
